<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Stone-mock API preview</title>
    <link rel="stylesheet" type="text/css" href="./lib/dataTables.css">
    <!-- jQuery -->
    <script type="text/javascript" charset="utf8" src="./lib/jquery-1.10.2.min.js"></script>
    <!-- DataTables -->
    <script type="text/javascript" charset="utf8" src="./lib/jquery.dataTables.js"></script>
</head>
<body>
    <header>
        <h2>Stone-mock API preview</h2>
    </header>
    <hr>
    <table id="table_id_example" class="display">
        <thead>
            <tr>
                <th>序号</th>
                <th>方法</th>
                <th>path</th>
                <th>类型</th>
                <th>mock</th>
                <th>JSON返回</th>
            </tr>
        </thead>
    </table>
</body>
<script>
    setTimeout(() => {
        if(window.APIJSONS && window.APIJSONS.length>0) {
            main(window.APIJSONS);
        } else {
            alert('请设置api的值！');
        }
    }, 0);

    function main(arr) {
        let tempArr = [];
        arr.map((data, index) => {
            tempArr.push(
                {
                    'id': index,
                    'method': data.method || 'all',
                    'path': data.path || 'unkonw path',
                    'type': data.type ||'data',
                    'mock': data.mock || 'false',
                    'data': JSON.stringify(data.value) || '{}'
                }
            )
        })
        $(document).ready( function () {
            $('#table_id_example').DataTable({
                data: tempArr,
                columns: [
                    {data: 'id'},
                    { data: 'method' },              
                    { data: 'path' },
                    { data: 'type' },
                    { data: 'mock' },
                    { data: 'data' },
                ]
            });
        });
    }
</script>
</html>